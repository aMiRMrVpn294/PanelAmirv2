<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ù¾Ù†Ù„ V2Ray | MrVPN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/vazir-font@latest/dist/font-face.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Vazir', sans-serif;
      background: linear-gradient(135deg, #1f1c2c, #928dab);
      color: #fff;
      text-align: center;
      padding: 30px;
      margin: 0;
    }
    h1 { font-size: 2em; margin-bottom: 10px; }
    p { font-size: 1.1em; margin-bottom: 20px; }
    input, button {
      padding: 12px;
      margin: 10px;
      border-radius: 8px;
      border: none;
      width: 80%;
      max-width: 300px;
      font-size: 1em;
      transition: 0.3s;
    }
    input {
      background: #ffffff22;
      color: #fff;
    }
    button {
      background: #ff6f61;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #ff3b2e;
    }
    .config-box {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      margin: 20px auto;
      padding: 20px;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .hidden { display: none; }
    #configs p {
      word-break: break-word;
      font-size: 0.9em;
      margin: 10px 0;
    }
    #langToggle {
      position: fixed;
      top: 20px;
      left: 20px;
      background: #444;
      color: #fff;
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 0.9em;
      cursor: pointer;
      z-index: 999;
    }
  </style>
</head>
<body>
  <button id="langToggle" onclick="toggleLang()">English</button>

  <h1 id="title">ğŸ‰ Ù¾Ù†Ù„ V2Ray | MrVPN</h1>
  <p id="subtitle">Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ØŒ Ø§Ø¨ØªØ¯Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</p>

  <div id="auth">
    <input type="text" id="username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ"><br>
    <button id="loginBtn" onclick="login()">ÙˆØ±ÙˆØ¯</button>
  </div>

  <div id="panel" class="hidden">
    <h2 id="configTitle">âœ… Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</h2>
    <div id="configs"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    let lang = "fa";

    const texts = {
      fa: {
        title: "ğŸ‰ Ù¾Ù†Ù„ V2Ray | MrVPN",
        subtitle: "Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ØŒ Ø§Ø¨ØªØ¯Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",
        loginBtn: "ÙˆØ±ÙˆØ¯",
        configTitle: "âœ… Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„",
        copy: "ğŸ“‹ Ú©Ù¾ÛŒ",
        share: "ğŸ”— Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ",
        copied: "Ú©Ù¾ÛŒ Ø´Ø¯!",
        shareError: "Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ ØªÙˆØ³Ø· Ù…Ø±ÙˆØ±Ú¯Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯",
        fetchError: "Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª",
        langBtn: "English"
      },
      en: {
        title: "ğŸ‰ V2Ray Panel | MrVPN",
        subtitle: "Enter your username to continue",
        loginBtn: "Login",
        configTitle: "âœ… Active Configs",
        copy: "ğŸ“‹ Copy",
        share: "ğŸ”— Share",
        copied: "Copied!",
        shareError: "Sharing not supported by browser",
        fetchError: "Error loading configs",
        langBtn: "ÙØ§Ø±Ø³ÛŒ"
      }
    };

    function toggleLang() {
      lang = lang === "fa" ? "en" : "fa";
      document.getElementById("title").innerText = texts[lang].title;
      document.getElementById("subtitle").innerText = texts[lang].subtitle;
      document.getElementById("loginBtn").innerText = texts[lang].loginBtn;
      document.getElementById("configTitle").innerText = texts[lang].configTitle;
      document.getElementById("langToggle").innerText = texts[lang].langBtn;
    }

    function createElement(tag) {
      return document.createElement(tag);
    }

    function login() {
      const username = document.getElementById("username").value;
      if (!username) return alert(lang === "fa" ? "Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" : "Please enter username");
      document.getElementById("auth").classList.add("hidden");
      document.getElementById("panel").classList.remove("hidden");
      loadConfigs();
    }

    function loadConfigs() {
      fetch("sub.txt")
        .then(res => res.text())
        .then(text => {
          const lines = text.split("\n").filter(x => x.trim());
          const container = document.getElementById("configs");
          lines.forEach((config, index) => {
            const box = createElement("div");
            box.className = "config-box";

            const qr = createElement("div");
            qr.id = "qr" + index;
            new QRCode(qr, { text: config, width: 128, height: 128 });

            const textEl = createElement("p");
            textEl.innerText = config;

            const copyBtn = createElement("button");
            copyBtn.innerText = texts[lang].copy;
            copyBtn.onclick = () => {
              navigator.clipboard.writeText(config);
              alert(texts[lang].copied);
            };

            const shareBtn = createElement("button");
            shareBtn.innerText = texts[lang].share;
            shareBtn.onclick = () => {
              if (navigator.share) {
                navigator.share({ title: "MrVPN", text: config });
              } else {
                alert(texts[lang].shareError);
              }
            };

            [qr, textEl, copyBtn, shareBtn].forEach(el => box.appendChild(el));
            container.appendChild(box);
          });
        })
        .catch(err => {
          console.error("Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§:", err);
          document.getElementById("configs").innerText = texts[lang].fetchError;
        });
    }
  </script>
</body>
</html>